## What is Docker

Docker 是一个用于开发、传送和运行应用程序的开放平台。 Docker 使您能够将应用程序与基础设施分开，以便您可以快速交付软件。 使用 Docker，您可以像管理应用程序一样管理基础设施。 通过利用 Docker 快速交付、测试和部署代码的方法，您可以显着减少编写代码和在生产中运行代码之间的延迟。

Docker 一般有两个意思

1. 代指整个 Docker 项目
2. 代指 Docker 引擎

我们可以将容器想象成一个杯子，而你的应用就是其中的液体。不同的液体（温度，性质）对于容器有不同的要求，而 Docker 可以帮我们方便的管理统一环境。

> Docker 容器与虚拟机的区别:
>
> - 容器是将操作系统层虚拟化
> - 虚拟机则是虚拟化硬件

Docker 利用 Linux 核心中的资源分离机制，例如 cgroups，以及 Linux 核心名字空间（namespaces），来创建独立的容器（containers)。

## Why Docker

软件开发和运行通常需要配置一套环境，比如 PHP 脚本就需要 PHP 解释器来运行，而 PHP 有多个版本，其中又有很多不同的可选插件，插件又可以进行不同的配置，而 PHP 本身也是可以进行配置的。因此配置环境会需要我们花费相当多的时间，还可能因为粗心而导致部分配置不同而留下隐患。Docker 就可以帮我们解决这一大麻烦，而且不止于此。

## What can I use Docker for?

快速、一致地交付您的应用程序

Docker 允许开发人员使用提供应用程序和服务的本地容器在标准化环境中工作，从而简化了开发生命周期。容器非常适合持续集成和持续交付 (CI/CD) 工作流。

> 主要有以下几种用途
>
> 1.  提供一次性的环境。比如，本地测试他人的软件、持续集成的时候提供单元测试和构建的环境
> 2.  提供弹性的云服务。因为 Docker 容器可以随开随关，很适合动态扩容和缩容。
> 3.  组建微服务架构。通过多个容器，一台机器可以跑多个服务，因此在本机就可以模拟出微服务架构。

Docker 非常适合高密度环境以及需要以更少资源完成更多任务的中小型部署。

## Docker 架构

![Docker架构图](https://docs.docker.com/engine/images/architecture.svg)

### Docker daemons

> Docker 守护进程，也叫 `dockerd` ，是一个持久化的进程，管理用户容器。守护进程会监听 [Docker Engine API](https://docs.docker.com/engine/api/sdk/) 的请求。

### Client

> Docker 客户端是许多 Docker 用户与 Docker 交互的主要方式。当您使用诸如 `docker run` 之类的命令时，客户端会将这些命令发送到 dockerd，后者会执行这些命令。docker 命令使用 Docker API。 Docker 客户端可以与多个守护进程通信。

### Docker registries

> 是一个存储 Docker 镜像的地方。[Docker Hub](https://hub.docker.com/) 是一个公共的注册中心，任何人都可以使用，默认配置下，Docker 将会在这里寻找镜像。你也可以搭建自己的私有镜像仓库。

## Docker 的主要概念

### 1. Images(镜像)

Docker 把应用程序及其依赖，打包在镜像文件里面。镜像是一个只读模板，包含创建 Docker 容器的说明。

您可以创建自己的映像，也可以仅使用其他人创建并在注册表中发布的映像。 要构建您自己的镜像，您需要使用简单的语法创建一个 **Dockerfile**，用于定义创建镜像和运行镜像所需的步骤。 Dockerfile 中的每条指令都会在镜像中创建一个层。 当您更改 Dockerfile 并重建映像时，只会重建那些已更改的层。 与其他虚拟化技术相比，这是使映像如此轻巧、小巧和快速的部分原因。

### 2. Containers(容器)

容器是图像的可运行实例。 您可以使用 Docker API 或 CLI 创建、启动、停止、移动或删除容器。 您可以将容器连接到一个或多个网络，为其附加存储，甚至可以根据其当前状态创建新映像。

默认情况下，容器与其他容器及其主机相对隔离。 您可以控制容器的网络、存储或其他底层子系统与其他容器或主机之间的隔离程度。

容器由其映像以及您在创建或启动它时提供给它的任何配置选项定义。 当容器被移除时，未存储在持久存储中的对其状态的任何更改都会消失。

### 3. Volumes(卷)

Docker 容器中的状态以及数据文件都是临时的，一旦容器被摧毁，那么其中的数据文件也会丢失。卷提供了将容器的特定文件系统路径连接回主机的能力。如果挂载了容器中的目录，则主机上也会看到该目录中的更改。如果我们在容器重新启动时挂载相同的卷和目录，我们会看到相同的文件。那我们将需要存储的数据和文件存储的这个目录，即可以实现持久化的目的。除此之外，也可以使用绑定挂载(bind mounts)来实现。

### 4. Networks(网络)

Docker 容器拥有各自的 IP 地址, 你可以构建多个独立的网络，容器可以在同一网络中相互通信。
